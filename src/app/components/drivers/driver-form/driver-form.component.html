<div class="driver-form-container">
  <div class="header">
    <a routerLink="/drivers" class="btn-back">← Volver</a>
    <h1>{{ isEditMode() ? 'Editar Conductor' : 'Nuevo Conductor' }}</h1>
  </div>

  @if (loading() && isEditMode()) {
    <div class="loading">Cargando conductor...</div>
  } @else {
    <form [formGroup]="driverForm" (ngSubmit)="onSubmit()" class="driver-form">
      @if (error()) {
        <div class="error-message">{{ error() }}</div>
      }

      <div class="form-group">
        <label for="name">Nombre *</label>
        <input
          type="text"
          id="name"
          formControlName="name"
          [class.invalid]="driverForm.get('name')?.invalid && driverForm.get('name')?.touched"
        />
        @if (driverForm.get('name')?.invalid && driverForm.get('name')?.touched) {
          <span class="error-text">{{ getFieldError('name') }}</span>
        }
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          [class.invalid]="driverForm.get('email')?.invalid && driverForm.get('email')?.touched"
        />
        @if (driverForm.get('email')?.invalid && driverForm.get('email')?.touched) {
          <span class="error-text">{{ getFieldError('email') }}</span>
        }
      </div>

      <div class="form-group">
        <label for="phone">Teléfono</label>
        <input
          type="tel"
          id="phone"
          formControlName="phone"
        />
      </div>

      <div class="form-group">
        <label for="license_number">Número de Licencia</label>
        <input
          type="text"
          id="license_number"
          formControlName="license_number"
        />
      </div>

      <div class="form-group">
        <label for="vehicle_type">Tipo de Vehículo</label>
        <input
          type="text"
          id="vehicle_type"
          formControlName="vehicle_type"
          placeholder="Ej: Sedán, SUV, Motocicleta, etc."
        />
      </div>

      <div class="form-actions">
        <button
          type="button"
          routerLink="/drivers"
          class="btn btn-secondary"
          [disabled]="loading()"
        >
          Cancelar
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="driverForm.invalid || loading()"
        >
          @if (loading()) {
            Guardando...
          } @else {
            {{ isEditMode() ? 'Actualizar' : 'Crear' }}
          }
        </button>
      </div>
    </form>
  }
</div>

